# 依赖问题排查指南

## 问题描述
无法导入以下类：
- `org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest`
- `org.springframework.boot.test.mock.mockito.MockBean`

## 已添加的依赖

在 `pom.xml` 中已添加以下依赖：

```xml
<!-- 基础测试框架 -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-test</artifactId>
    <scope>test</scope>
</dependency>

<!-- Spring Boot 测试核心模块（包含 @MockBean）-->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-test</artifactId>
    <scope>test</scope>
</dependency>

<!-- Spring Boot 测试自动配置（包含 @WebMvcTest）-->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-test-autoconfigure</artifactId>
    <scope>test</scope>
</dependency>
```

## 解决步骤

### 步骤 1：刷新 Maven 依赖

**在 IntelliJ IDEA 中：**
1. 右键点击 `pom.xml` 文件
2. 选择 `Maven` → `Reload Project`
3. 或者点击右侧 Maven 工具栏的刷新按钮

**在命令行中：**
```bash
mvn clean install
```

### 步骤 2：清除 IDE 缓存

**IntelliJ IDEA：**
1. 菜单栏：`File` → `Invalidate Caches / Restart...`
2. 选择 `Invalidate and Restart`

**Eclipse：**
1. 菜单栏：`Project` → `Clean...`
2. 选择项目并清理

### 步骤 3：检查依赖是否下载

在项目根目录运行：
```bash
mvn dependency:tree | findstr "spring-boot-test"
```

应该能看到：
- `spring-boot-test`
- `spring-boot-test-autoconfigure`

### 步骤 4：手动删除并重新下载依赖

如果上述步骤无效，尝试：
```bash
# 删除本地仓库中的相关依赖
# Windows 路径通常在：C:\Users\你的用户名\.m2\repository\org\springframework\boot

# 然后重新下载
mvn dependency:resolve
```

### 步骤 5：验证依赖版本

检查 Spring Boot 版本是否为 4.0.1：
```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>4.0.1</version>
</parent>
```

## 如果仍然无法解决

### 方案 A：使用完整包路径（临时方案）

如果依赖确实无法解析，可以尝试使用完整的类路径，但这不推荐。

### 方案 B：检查 Spring Boot 版本兼容性

Spring Boot 4.0.1 可能还在 RC 或里程碑版本，建议检查：
- 是否应该使用 Spring Boot 3.x 稳定版
- 或者等待 4.0.1 正式发布

### 方案 C：降级到 Spring Boot 3.x（推荐）

如果 4.0.1 版本有问题，可以降级到稳定版本：

```xml
<parent>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>3.2.0</version>  <!-- 或 3.3.0 -->
</parent>
```

## 验证依赖是否正确的命令

```bash
# 查看所有测试依赖
mvn dependency:tree -Dscope=test

# 查看特定依赖
mvn dependency:tree | findstr "spring-boot-test-autoconfigure"
mvn dependency:tree | findstr "spring-boot-test"
```

## 预期结果

刷新 Maven 后，应该能在以下位置找到这些类：
- `@WebMvcTest`: `spring-boot-test-autoconfigure` 模块
- `@MockBean`: `spring-boot-test` 模块

